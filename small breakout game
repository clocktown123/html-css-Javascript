<!DOCTYPE html>
<html lang="en-US"></html>
<head>
    <meta charset="utf-8" />
    <title>Potato!</title>

    <!-------------------css section---------------------->
    <style>
        *{
            padding: 0;
            margin: 0;
        }

        canvas{
            background: #7b1069;
            display: block;
            margin: 0 auto;
        }
    </style>
    <!-----------------------end of css-------------------------------->
</head>

<body>
    <canvas id="myCanvas" width="500" height="300"></canvas>

	<!-------------javascript section------------------------>
	<script>
		var canvas = document.getElementById("myCanvas")
		var ctx = canvas.getContext("2d");

		// ball variables
		var BallX = canvas.width/2;
		var BallY = canvas.height-30;
		var bVx = 2;
		var bVy = -2;
        var ballRadius = 10;

        //paddle variables
        var paddleHeight = 10;
        var paddleWidth = 75;
        var paddleX = (canvas.width - paddleWidth) / 2;
        let interval = 0;


        var rightPressed = false
        var leftPressed = false

        //keyboard input
        document.addEventListener("keydown", keyDownHandler, false);
        document.addEventListener("keyup", keyUpHandler, false);

        function keyDownHandler(e){
            if(e.code == "ArrowRight"){
                rightPressed = true;
            }
            else if(e.code == 'ArrowLeft'){
                leftPressed = true;
            }
        }

        function keyUpHandler(e){
            if(e.code == "ArrowRight"){
                rightPressed = false;
            }
            else if(e.code == "ArrowLeft"){
                leftPressed = false;
            }
        }

        //ball functions---------------------------------------------------------------

		function drawBall(){
			ctx.beginPath();
			ctx.arc(BallX, BallY, 10, 0, Math.PI*2);
			ctx.fillStyle = "#0095DD";
			ctx.fill();
			ctx.closePath();
		}

        function moveBall(){
             //collision with left and right wall

			BallX += bVx;
			BallY += bVy;
        }
        
        //paddle functions-----------------------------------------------------------------------

        function drawPaddle(){
            ctx.beginPath();
			ctx.rect(paddleX, canvas.height - paddleHeight, paddleWidth, paddleHeight);
			ctx.fillStyle = "#0095DD";
			ctx.fill();
			ctx.closePath();
        }

        function movePaddle(){
            if(rightPressed == true){
                paddleX += 5
            }
            else if(leftPressed == true){
                paddleX -= 5
            }
            else{
                paddleX += 0
            }

        }

        function checkCollision(){
            if(BallX + bVx > canvas.width-ballRadius || BallX + bVx < ballRadius){
                bVx = -bVx;
            }
            
            if(BallY + bVy < ballRadius){
                bVy = -bVy;
            }
            
            if (BallY + bVy > canvas.height - ballRadius){
                if(BallX > paddleX && BallX < paddleX + paddleWidth){
                    bVy = -bVy;
                    console.log("hit the paddle");
                } else{
                    alert("game over");
                    document.location.reload();
                    clearInterval(interval);
                }
            }

        }

		function draw(){
			ctx.clearRect(0, 0, canvas.width, canvas.height);
			drawBall();
            moveBall();
            drawPaddle();
            movePaddle();
            checkCollision();

		}

		interval = setInterval(draw,10);

	</script>
	<!---------------end of javascript section-------------->
</body>
